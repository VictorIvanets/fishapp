const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/comment-CkTcAAlw.js","assets/index-CnefwrEu.js","assets/index-REey7LcU.css","assets/index-CK6Knyi-.js"])))=>i.map(i=>d[i]);
import{r as i,j as e,p as F,_ as S,q as b,f as E,P as I}from"./index-CnefwrEu.js";import{l as y,S as $,a as g,g as P}from"./pagination-DhYhuLw1.js";import{a as f}from"./Preloader-Dnbs5vGn.js";import{W as D}from"./weather-WQl-PR41.js";import"./index-CK6Knyi-.js";function R({img:n,setId:s}){const[c,o]=i.useState();return i.useEffect(()=>{const t=y(`${s}`);t&&t.then(l=>setTimeout(()=>{Array.isArray(l)&&o(l.reverse())},1e3))},[n,o,s]),e.jsx("div",{className:"swiperpage",children:c?e.jsx($,{className:"swiperbox",spaceBetween:50,slidesPerView:1,children:c?c.map(t=>e.jsx(g,{className:"swiperpage__item",children:e.jsx("div",{className:"swiperpage__picbox",children:e.jsx("img",{className:"swiperpage__img",src:`${F}static/${s}/${t}`})})},t)):e.jsx(g,{className:"swiperpage__item",children:e.jsx("div",{className:"swiperpage__picbox",children:e.jsx("img",{className:"swiperpage__img",src:"./fonsecond.jpg"})})})}):e.jsx(f,{})})}const A=i.lazy(()=>S(()=>import("./comment-CkTcAAlw.js"),__vite__mapDeps([0,1,2,3])));function q(){const{id:n}=b(),[s,c]=i.useState(),[o,t]=i.useState(!1),[l,m]=i.useState([]),[h,j]=i.useState(!1),[u,_]=i.useState("Вибрати фото"),{login:x}=JSON.parse(localStorage.getItem("userName")||"");i.useEffect(()=>{P(n).then(a=>{a&&typeof a=="object"&&c(a),a&&typeof a=="string"&&console.log(a)})},[n,h,l]);function N(d){m([...d.target.files]),[...d.target.files].forEach(p=>{const v=p.name.split(".");_(v[0])})}async function w(d){d.preventDefault();const a=new FormData;if(l){l.forEach(r=>{a.append("files",r,r.name)});const p={headers:{"content-type":"multipart/form-data"}};E.post(`${I}fotoset/upload/${s==null?void 0:s.setID}`,a,p).then(r=>{j(!h),t(!1)}).catch(r=>{console.error("Error uploading files: ",r)}),m([])}}return e.jsxs("div",{className:"setspagebox",children:[e.jsxs("div",{className:"setspage",children:[s?e.jsxs("div",{className:"setspage__nav",children:[e.jsxs("div",{className:"colorLight setspage__loadinfo",children:[e.jsxs("h2",{children:["Назва/Локація:",e.jsx("span",{children:e.jsx("h1",{children:s.title})})]}),e.jsxs("div",{children:[e.jsxs("h3",{children:["Оцінка: ",s.score]}),e.jsxs("h3",{children:["Дата рибалки: ",s.date]}),s.weather.length?e.jsx("div",{className:"setspage__weather",children:e.jsx(D,{weather:s.weather})}):"",e.jsx("br",{})]}),e.jsxs("a",{href:`https://www.google.com/maps?ll=${s.coords[0]},${s.coords[1]}&q=${s.coords[0]},${s.coords[1]}`,target:"_blank",children:[e.jsx("h2",{children:" Координати"}),e.jsxs("p",{children:["latitude: ",s.coords[0]]}),e.jsxs("p",{children:["longitude: ",s.coords[1]]})]})]}),e.jsxs("div",{className:"colorLight setspage__loadinfo__description",children:[e.jsxs("div",{className:"setspage__loadinfo__description__box",children:[e.jsx("div",{className:"setspage__loadinfo__description__head",children:e.jsx("h2",{children:"Опис:"})}),e.jsx("div",{className:"setspage__loadinfo__description__text",children:e.jsx("p",{children:s.description})})]}),x==s.login?e.jsxs("div",{className:"loadimg",children:[o?e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:w,className:"loadimg__form",children:[e.jsx("label",{htmlFor:"upload",className:"loadimg__label",children:e.jsx("p",{children:u})}),e.jsx("input",{className:"loadimg__input",name:"upload",id:"upload",type:"file",multiple:!0,onChange:N}),e.jsx("button",{className:"loadimg__btn",type:"submit",children:"завантажити"})]})}):"",e.jsx("h3",{className:"loadimg__head",onClick:()=>{t(!o),_("Вибрати фото"),m([])},children:o?"ВІДМІНИТИ":"ДОДАТИ ФОТО"})]}):""]})]}):e.jsx("h1",{children:"ERORR. NO DATA"}),e.jsx("div",{className:"setspage__moreinfo colorLight",children:s!=null&&s.img?e.jsx(R,{img:s==null?void 0:s.img,setId:s==null?void 0:s.setID}):e.jsx(f,{})})]}),e.jsx("div",{className:"comentbox",children:e.jsx(A,{login:x,setId:n})})]})}export{q as default};
