import{a as b,b as v,u as w,r,j as s,c as p,L,g as N}from"./index-D8ug299Z.js";import{P as E}from"./Preloader-BgH7zzjP.js";function V(){const n=b(),o=v(),{login:i,jwt:l,loginErrorMass:a,isLoading:h}=w(e=>e.user),[m,c]=r.useState(!1),[x,g]=r.useState("");r.useEffect(()=>{a==="Request failed with status code 401"&&g("невірний логін або пароль"),a==="Network Error"&&g("сервер не відповідає"),l&&n(`/main/${i}`)},[l,n,i,a]);const f=async e=>{e.preventDefault(),o(p.clearLoginError());const t=e.target,{login:u,password:d}=t;u.value.length>2&&d.value.length>2?(c(!1),await j(u.value,d.value)):c(!0)},j=async(e,t)=>{o(N({login:e,password:t}))};return s.jsxs("div",{className:"loginpage",children:[s.jsx("h2",{className:"roboto-thin colorLight",children:" вхід "}),h?s.jsxs("div",{className:"loginpage__load",children:[s.jsx("button",{onClick:()=>o(p.isLoadingFalse(!1)),className:"loginpage__loadbtn",children:"ВІДМІНА"}),s.jsx(E,{})]}):s.jsxs("form",{onSubmit:f,children:[s.jsx("input",{name:"login",id:"login",placeholder:"login",type:"text"}),s.jsx("input",{name:"password",type:"password",id:"password",placeholder:"password"}),a?s.jsx("p",{className:"margin1 colorGreen roboto-bold",children:x}):"",m?s.jsx("p",{className:"margin1 colorGreen roboto-bold",children:"заповніть всі поля"}):"",s.jsx("button",{children:"Вхід"})]}),s.jsx(L,{className:"light roboto-regular",to:"/register",children:"зареєструйтеся"})]})}export{V as default};
