const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/comment-DrtBVBsa.js","assets/index-D8ug299Z.js","assets/index-C20UFlqf.css","assets/index-BkgYhNUy.js"])))=>i.map(i=>d[i]);
import{r as t,j as e,p as F,_ as S,q as b,f as E,P as I}from"./index-D8ug299Z.js";import{l as y,S as $,a as x,g as P}from"./pagination-DNALYpj7.js";import{a as j}from"./Preloader-BgH7zzjP.js";import{W as D}from"./weather-CuEwWP1O.js";import"./index-BkgYhNUy.js";function R({img:c,setId:s}){const[d,l]=t.useState();return t.useEffect(()=>{const i=y(`${s}`);i&&i.then(r=>setTimeout(()=>{Array.isArray(r)&&l(r.reverse())},1e3))},[c,l,s]),e.jsx("div",{className:"swiperpage",children:d?e.jsx($,{className:"swiperbox",spaceBetween:50,slidesPerView:1,children:d?d.map(i=>e.jsx(x,{className:"swiperpage__item",children:e.jsx("div",{className:"swiperpage__picbox",children:e.jsx("img",{className:"swiperpage__img",src:`${F}static/${s}/${i}`})})},i)):e.jsx(x,{className:"swiperpage__item",children:e.jsx("div",{className:"swiperpage__picbox",children:e.jsx("img",{className:"swiperpage__img",src:"./fonsecond.jpg"})})})}):e.jsx(j,{})})}const A=t.lazy(()=>S(()=>import("./comment-DrtBVBsa.js"),__vite__mapDeps([0,1,2,3])));function q(){const{id:c}=b(),[s,d]=t.useState(),[l,i]=t.useState(!1),[r,m]=t.useState([]),[h,f]=t.useState(!1),[u,_]=t.useState("Вибрати фото"),{login:g}=JSON.parse(localStorage.getItem("userName")||"");t.useEffect(()=>{P(c).then(a=>{a&&typeof a=="object"&&d(a),a&&typeof a=="string"&&console.log(a)})},[c,h,r]);function N(n){m([...n.target.files]),console.log([...n.target.files]),[...n.target.files].forEach(p=>{const o=p.name,v=o.split(".");console.log(o),_(v[0])})}async function w(n){n.preventDefault();const a=new FormData;if(r){r.forEach(o=>{a.append("files",o,o.name),console.log(o),console.log(o.name)}),console.log(a);const p={headers:{"content-type":"multipart/form-data"}};E.post(`${I}fotoset/upload/${s==null?void 0:s.setID}`,a,p).then(o=>{f(!h),i(!1)}).catch(o=>{console.error("Error uploading files: ",o)}),m([])}}return e.jsxs("div",{className:"setspagebox",children:[e.jsxs("div",{className:"setspage",children:[s?e.jsxs("div",{className:"setspage__nav",children:[e.jsxs("div",{className:"colorLight setspage__loadinfo",children:[e.jsxs("h2",{children:["Назва/Локація:",e.jsx("span",{children:e.jsx("h1",{children:s.title})})]}),e.jsxs("div",{children:[e.jsxs("h3",{children:["Оцінка: ",s.score]}),e.jsxs("h3",{children:["Дата рибалки: ",s.date]}),s.weather.length?e.jsx("div",{className:"setspage__weather",children:e.jsx(D,{weather:s.weather})}):"",e.jsx("br",{})]}),e.jsxs("a",{href:`https://www.google.com/maps?ll=${s.coords[0]},${s.coords[1]}&q=${s.coords[0]},${s.coords[1]}`,target:"_blank",children:[e.jsx("h2",{children:" Координати"}),e.jsxs("p",{children:["latitude: ",s.coords[0]]}),e.jsxs("p",{children:["longitude: ",s.coords[1]]})]})]}),e.jsxs("div",{className:"colorLight setspage__loadinfo__description",children:[e.jsxs("div",{className:"setspage__loadinfo__description__box",children:[e.jsx("div",{className:"setspage__loadinfo__description__head",children:e.jsx("h2",{children:"Опис:"})}),e.jsx("div",{className:"setspage__loadinfo__description__text",children:e.jsx("p",{children:s.description})})]}),g==s.login?e.jsxs("div",{className:"loadimg",children:[l?e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:w,className:"loadimg__form",children:[e.jsx("label",{htmlFor:"upload",className:"loadimg__label",children:e.jsx("p",{children:u})}),e.jsx("input",{className:"loadimg__input",name:"upload",id:"upload",type:"file",multiple:!0,onChange:N}),e.jsx("button",{className:"loadimg__btn",type:"submit",children:"завантажити"})]})}):"",e.jsx("h3",{className:"loadimg__head",onClick:()=>{i(!l),_("Вибрати фото"),m([])},children:l?"ВІДМІНИТИ":"ДОДАТИ ФОТО"})]}):""]})]}):e.jsx("h1",{children:"ERORR. NO DATA"}),e.jsx("div",{className:"setspage__moreinfo colorLight",children:s!=null&&s.img?e.jsx(R,{img:s==null?void 0:s.img,setId:s==null?void 0:s.setID}):e.jsx(j,{})})]}),e.jsx("div",{className:"comentbox",children:e.jsx(A,{login:g,setId:c})})]})}export{q as default};
